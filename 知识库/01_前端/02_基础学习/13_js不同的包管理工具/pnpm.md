# pnpmç®€ä»‹å’Œä½¿ç”¨

ä½œä¸ºä¸€åå‰ç«¯ç¨‹åºåª›ğŸ‘¨ğŸ»â€ğŸ’»ï¼Œå¯¹`npm`å’Œ`yarn`è¿™ä¸¤ä¸ªåŒ…ç®¡ç†å™¨ä¸€å®šä¸é™Œç”Ÿï¼Œé‚£ä¹ˆä½ å¬è¯´è¿‡[pnpm](https://link.juejin.cn?target=https%3A%2F%2Fpnpm.io%2F)ä¹ˆï¼Ÿå®ƒåˆ°åº•æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Ÿå’Œnpmè¿˜æœ‰yarnæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåˆæœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿæœ¬æ–‡å°±å°†è§£å†³ä»¥ä¸‹è¿™å‡ ä¸ªé—®é¢˜ï¼š

1. `pnpm`æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆä½œç”¨
2. `pnpm`æœ‰ä»€ä¹ˆä¼˜åŠ¿å’Œç‰¹ç‚¹
3. `pnpm`ä¸`npm`å’Œ`yarn`æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ
4. `pnpm`å¦‚ä½•å®‰è£…å’Œä½¿ç”¨

# pnpmæ˜¯ä»€ä¹ˆ

å¿«é€Ÿçš„ï¼ŒèŠ‚çœç£ç›˜ç©ºé—´çš„åŒ…ç®¡ç†å·¥å…·

> ```
> Fast, disk space efficient package manager
> ```

é€šè¿‡`pnpm`çš„ç®€ä»‹æˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥å®ƒå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªåŒ…ç®¡ç†å·¥å…·ï¼Œä½œç”¨æ˜¯è·Ÿ`npm`å’Œ`yarn`ä¸€æ ·çš„å‘¢ã€‚é‚£æ—¢ç„¶åŠŸèƒ½æ˜¯ä¸€æ ·çš„ä¸ºä»€ä¹ˆåˆè¦å‡ºç°ä¸€ä¸ª`pnpm`å‘¢ï¼Ÿé€šè¿‡å®˜æ–¹çš„æ–‡æ¡£æˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥å®ƒçš„ä¼˜åŠ¿åœ¨äºï¼š

- åŒ…å®‰è£…é€Ÿåº¦æå¿«
- ç£ç›˜ç©ºé—´åˆ©ç”¨æ•ˆç‡é«˜

# `pnpm`æœ‰ä»€ä¹ˆä¼˜åŠ¿å’Œç‰¹ç‚¹

æˆ‘ä»¬ä¸Šé¢æåˆ°äº†pnpmçš„ä¼˜åŠ¿åœ¨äº*åŒ…å®‰è£…é€Ÿåº¦æå¿«*å’Œ*ç£ç›˜ç©ºé—´åˆ©ç”¨æ•ˆç‡é«˜*ã€‚

## åŒ…å®‰è£…é€Ÿåº¦æå¿«

æ¯”ä¼ ç»Ÿæ–¹æ¡ˆå®‰è£…åŒ…çš„é€Ÿåº¦å¿«äº†ä¸¤å€ï¼Œä»¥ä¸‹æ˜¯å®˜æ–¹ç»™å‡ºçš„[benchmarks](https://link.juejin.cn?target=https%3A%2F%2Fpnpm.io%2Fzh%2Fbenchmarks)(å¯¹æ¯”äº†npm, pnpm, Yarn Classic, and Yarn PnP)ï¼Œåœ¨å¤šç§å¸¸è§æƒ…å†µä¸‹ï¼Œæ‰§è¡Œinstallçš„é€Ÿåº¦æ¯”è¾ƒ

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/61e985c6fdc54697a014f6f2383377e6~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

ä¸ºä»€ä¹ˆpnpmè¦æ¯”å…¶ä»–çš„åŒ…å¤„ç†å™¨è¦å¿«å‘¢ï¼Ÿ

ä¸»è¦å¾—ç›Šäºå®ƒçš„åŒ…ç®¡ç†æœºåˆ¶ï¼Œå®ç°äº†èŠ‚çº¦ç£ç›˜ç©ºé—´å¹¶æå‡å®‰è£…é€Ÿåº¦ï¼ˆä¹Ÿå°±æ˜¯ç¬¬äºŒä¸ªä¼˜åŠ¿ï¼‰

## ç£ç›˜ç©ºé—´åˆ©ç”¨æ•ˆç‡é«˜

pnpm çš„ `node_modules` å¸ƒå±€ä½¿ç”¨ç¬¦å·é“¾æ¥æ¥åˆ›å»ºä¾èµ–é¡¹çš„åµŒå¥—ç»“æ„ã€‚`node_modules` ä¸­æ¯ä¸ªåŒ…çš„æ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯æ¥è‡ªå†…å®¹å¯å¯»å€å­˜å‚¨çš„ç¡¬é“¾æ¥ã€‚

é‚£ä¹ˆä¸ºä»€ä¹ˆè¯´pnpmè¿™ç§`åŸºäºå†…å®¹å¯»å€`çš„æ–¹å¼å¯¹ç£ç›˜ç©ºé—´åˆ©ç”¨æ•ˆç‡æ¯”è¾ƒé«˜å‘¢

- ä¸ä¼šé‡å¤å®‰è£…åŒä¸€ä¸ªåŒ…ã€‚ä½¿ç”¨`npm/yarn` çš„æ—¶å€™ï¼Œå¦‚æœ100ä¸ªåŒ…ä¾èµ–`express` ï¼Œé‚£ä¹ˆå°±å¯èƒ½å®‰è£…äº†100æ¬¡`express` ï¼Œç£ç›˜ä¸­å°±æœ‰100ä¸ªåœ°æ–¹å†™å…¥äº†è¿™éƒ¨åˆ†ä»£ç ã€‚ä½†æ˜¯`pnpm`ä¼šåªåœ¨ä¸€ä¸ªåœ°æ–¹å†™å…¥è¿™éƒ¨åˆ†ä»£ç ï¼Œåé¢ä½¿ç”¨ä¼šç›´æ¥ä½¿ç”¨ç¡¬é“¾æ¥

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/36d5260c0e094fbfa2a7865b362bda51~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

- å³ä½¿ä¸€ä¸ªåŒ…çš„ä¸åŒç‰ˆæœ¬ï¼Œpnpm ä¹Ÿä¼šæå¤§ç¨‹åº¦åœ°å¤ç”¨ä¹‹å‰ç‰ˆæœ¬çš„ä»£ç ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ `express4.18.1` å’Œ`epxress5.0.0-beta.1`çš„ä¸¤ä¸ªç‰ˆæœ¬å‡çº§å¯¹æ¯”ï¼Œ`epxress5.0.0-beta.1`åªæ˜¯é‡æ–°ä¸‹è½½äº†19ä¸ªæ–°çš„æ›´æ–°çš„åŒ…ã€‚

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7c2f15f6ebbe4bfb842a0cebfb440d18~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

# `pnpm`ä¸`npm`å’Œ`yarn`æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ

`pnpm`ä¸`npm`å’Œ`yarn`çš„ä¸åŒç‚¹ä¸»è¦æ˜¯ä»åŒ…çš„ä¾èµ–ç®¡ç†æ–¹é¢æ¥è¯´æ˜ã€‚

## npm2çš„ä¾èµ–ç®¡ç†

npm2ç”Ÿæˆçš„ä¾èµ–ç®¡ç†æ¯”è¾ƒçš„ç®€å•ç›´æ¥ï¼Œä¼šæŒ‰ç…§å®‰è£…åŒ…çš„ä¾èµ–æ ‘å½¢ç»“æ„ç›´æ¥å¡«å……åœ¨æœ¬åœ°çš„ç›®å½•ç»“æ„ä¸‹ï¼š

æ¯”å¦‚`express`å’Œ`koa`ä»–ä»¬ä¼šåŒæ—¶ä¾èµ–`accepts`ï¼Œé‚£ä¹ˆåœ¨`install`ä¹‹åç”Ÿæˆçš„`node_modules`å°±ä¼šæ˜¯å¦‚ä¸‹ç»“æ„ï¼š

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ca8280d3e3924f7aa8393083fafeab60~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

npm2çš„è¿™ç§æ–¹å¼çš„ä¼˜ç‚¹å°±æ˜¯`æ¯”è¾ƒçš„ç›´è§‚`ï¼Œä½†æ˜¯å‘¢ç¼ºç‚¹ä¹Ÿæ˜¯æ˜¾è€Œæ˜“è§çš„å°±æ˜¯

1. å±‚çº§ä¾èµ–è¿‡æ·±
2. ç›¸åŒåŒ…çš„ç›¸åŒç‰ˆæœ¬ä¼šå¤šæ¬¡è¢«ä¸‹è½½ï¼Œåˆ©ç”¨ç‡ä½ï¼Œå ç”¨ç£ç›˜ç©ºé—´å¤§

## npm3/yarnçš„ä¾èµ–ç®¡ç†

é’ˆå¯¹npm2çš„ä¸¤ä¸ªç¼ºç‚¹å‘¢ï¼Œnpm3åšäº†ä¸ªæ”¹å˜ï¼Œä¸å†ä½¿ç”¨åµŒå¥—çš„ç»“æ„äº†ï¼Œè€Œæ˜¯è®²ä¾èµ–è¿›è¡Œæ‰“å¹³ï¼Œè¿™æ ·å°±èƒ½è§£å†³å±‚çº§ä¾èµ–æ·±å’ŒåŒ…çš„åˆ©ç”¨ç‡çš„é—®é¢˜ï¼Œé‚£ä¹ˆä¸Šé¢çš„ä¾èµ–å…³ç³»å°±ä¼šå˜æˆä¸‹é¢è¿™ä¸ªæ ·å­ï¼š

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f7965c8b2807473089ccc32f3af65854~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

åœ¨æ–‡ä»¶é‡Œçœ‹å°±æ˜¯ä¸‹é¢çš„è¿™ä¸ªæ ·å­(ä¸ºäº†æ–¹ä¾¿è§‚çœ‹ï¼ŒæŠŠå…¶ä»–ä¾ç¨€ä¾èµ–åŒ…æ‰‹åŠ¨åˆ é™¤äº†ğŸ˜)ï¼š

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cda71f1803cc453e80d3c84a48b40eb7~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œ`express@4.18.1`å’Œ`koa@2.13.4`å¼•ç”¨äº†`accepts`çš„ç‰ˆæœ¬æ˜¯ä¸€æ ·çš„ï¼Œè¿™æ ·æ‰ä¼šè¢«å¹³é“ºåœ¨`node_modules`ä¸‹ï¼Œé‚£å¦‚æœå¼•ç”¨çš„åŒ…çš„ç‰ˆæœ¬ä¸ä¸€æ ·åˆæ˜¯ä»€ä¹ˆæ ·çš„æƒ…å†µå‘¢ï¼Ÿå°±åƒ`debug`,`http-errors` ã€`statuses`ç­‰è¿™å‡ ä¸ªåŒ…

- `express@4.18.1`å¼•å…¥çš„æ˜¯:`debug@2.6.9`ã€`http-errors@2.0.0`ã€`statuses@2.0.1`
- `koa@2.13.4`å¼•å…¥çš„æ˜¯:`debug@4.3.2`ã€`http-errors@1.6.3`ã€`statuses@1.5.0`

æ­¤æ—¶ï¼Œåœ¨`node_modules`ç»“æ„æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­ï¼š

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a8104610094742918d48d7b201f25316~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/775dde9c54d54657935f2e301a4dfcb0~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

è‡³äºä¸ºä»€ä¹ˆè¯´`express@4.18.1`çš„ä¾èµ–åŒ…ä¼šåœ¨æ ¹ç›®å½•çš„`node_modules`ä¸‹å‘¢ï¼Œè¿™æ˜¯npmè‡ªå·±çš„ä¸€ä¸ªè§„åˆ™ï¼Œå…·ä½“å¯ä»¥çœ‹ä¸€ä¸‹[ä¸ä½ é¡¹ç›®ç›¸å…³çš„npmçŸ¥è¯†æ€»ç»“](https://juejin.cn/post/6933167787435261959)

npm3çš„è¿™ç§å¹³é“ºæ–¹å¼ç¡®å®æ˜¯è§£å†³äº†å±‚çº§ä¾èµ–æ·±å’ŒåŒ…çš„åˆ©ç”¨ç‡çš„é—®é¢˜ï¼Œä½†æ˜¯ä¹Ÿå¼•å…¥äº†å…¶ä»–çš„é—®é¢˜ï¼š

1. å¯¹æ²¡æœ‰æ‰‹åŠ¨å¼•å…¥çš„åŒ…ï¼Œä¾‹å¦‚`express@4.18.1`ä¾èµ–çš„`cookie`ï¼Œé¡¹ç›®ä¸­æ‰‹åŠ¨å¼•å…¥ï¼Œä½†æ˜¯ä¾ç„¶å¯ä»¥ä½¿ç”¨ï¼Œè¿™æ ·å°±é€ æˆäº†å¦‚æœå“ªå¤©expressæ”¹å˜äº†ç­–ç•¥ä¸åœ¨ä½¿ç”¨cookieï¼Œè€Œæˆ‘ä»¬çš„é¡¹ç›®ä¸­åˆä½¿ç”¨äº†cookieï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´é¡¹ç›®æ— æ³•å¯åŠ¨
2. è™½ç„¶npmæ˜¯å…±äº«äº†ç›¸åŒç‰ˆæœ¬çš„ä¾èµ–ï¼Œä½†æ˜¯å¦‚æœç‰ˆæœ¬ä¸åŒï¼Œnpmè¿˜æ˜¯ä¼šå®Œæ•´çš„ä¸‹è½½ä¸¤ä¸ªä¸åŒçš„ç‰ˆæœ¬ï¼Œè¿™æ ·ä¹Ÿä¼šæœ‰ä¾èµ–çš„å†—ä½™

## [pnpmçš„ä¾èµ–](https://link.juejin.cn?target=https%3A%2F%2Fpnpm.io%2Fzh%2Fsymlinked-node-modules-structure)

pnpmä¸ºäº†è§£å†³npm3å¸¦æ¥çš„ä¸€äº›é—®é¢˜å‘¢ï¼Œé‡‡ç”¨äº†å¦å¤–ä¸€ç§æ–¹å¼æ¥ç®¡ç†ä¾èµ–ï¼špnpm çš„ `node_modules` å¸ƒå±€ä½¿ç”¨ç¬¦å·é“¾æ¥æ¥åˆ›å»ºä¾èµ–é¡¹çš„åµŒå¥—ç»“æ„ç®¡ã€‚

`node_modules` ä¸­`.pnpm`ä¸‹æ¯ä¸ªåŒ…çš„æ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯æ¥è‡ªå†…å®¹å¯å¯»å€å­˜å‚¨çš„ç¡¬é“¾æ¥ã€‚

è¿™æ˜¯ `node_modules` ä¸­çš„å”¯ä¸€çš„â€œçœŸå®â€æ–‡ä»¶ã€‚ ä¸€æ—¦æ‰€æœ‰åŒ…éƒ½ç¡¬é“¾æ¥åˆ° `node_modules`ï¼Œå°±ä¼šåˆ›å»ºç¬¦å·é“¾æ¥æ¥æ„å»ºåµŒå¥—çš„ä¾èµ–å…³ç³»å›¾ç»“æ„ã€‚

æˆ‘ä»¬ç”¨pnpmå®‰è£…ä¸€ä¸‹`express@4.18.1`å’Œ`koa@2.13.4`ï¼Œç”Ÿæˆçš„ç›®å½•å¦‚ä¸‹æ‰€ç¤ºï¼š

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7985ada5da2442638dae3fa4ab2f4465~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

åœ¨`node_modules`ä¸­çš„ä¾èµ–åªæœ‰åœ¨`package.json`ä¸­æ‰‹åŠ¨å¼•å…¥çš„ä¾èµ–`express`å’Œ`koa`ï¼Œç»†å¿ƒçš„ä½ ä¼šå‘ç°è¿™ä¸¤ä¸ªæ–‡ä»¶åé¢æœ‰ä¸€ä¸ªç®­å¤´ï¼Œè€Œè¿™ä¸ªç®­å¤´å°±æ˜¯pnpmä½¿ç”¨çš„è½¯è¿æ¥çš„æ–¹å¼æŒ‡å‘äº†`.pnpm`æ–‡ä»¶çœŸæ­£çš„æ–‡ä»¶ï¼š

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0d243d8fe2dc4368a5a0db881406ff8a~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

è¿™äº›æ–‡ä»¶ä¼šåœ¨å†…å­˜ä¸­ç»Ÿä¸€å­˜å‚¨ï¼Œå¦‚æœæœ‰ä¾èµ–ä¸åŒç‰ˆæœ¬çš„æ—¶å€™ï¼Œpnpmä¹Ÿåªä¼šä¸‹è½½ä¸åŒç‰ˆæœ¬ä¸­ä¸åŒçš„å†…å®¹ã€‚å¯¹æ¯”

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/56257d6edf414ae89339033ff8f17e57~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

> **å°è¯¾å ‚ï¼šç¡¬é“¾æ¥å’Œè½¯è¿æ¥çš„åŒºåˆ«**
>  linuxä¸‹æœ‰ä¸¤ç§é“¾æ¥ï¼Œä¸€ç§æ˜¯`ç¡¬é“¾æ¥ï¼ˆHard Linkï¼‰`ï¼Œå¦ä¸€ç§æ˜¯`ç¬¦å·é“¾æ¥(Symbolic Link)`ï¼Œä¹Ÿå¯ä»¥ç§°ä¹‹ä¸ºè½¯è¿æ¥
>
> - `ç¡¬é“¾æ¥`ï¼šåªèƒ½å¼•ç”¨åŒä¸€æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶ã€‚å®ƒå¼•ç”¨çš„æ˜¯æ–‡ä»¶åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­çš„ç‰©ç†ç´¢å¼•ï¼ˆinodeï¼‰ã€‚å½“ç§»åŠ¨æˆ–è€…åˆ é™¤åŸå§‹æ–‡ä»¶æ—¶ï¼Œç¡¬é“¾æ¥ä¸ä¼šè¢«ç ´åï¼Œå› ä¸ºå®ƒæ‰€å¼•ç”¨çš„æ˜¯æ–‡ä»¶çš„ç‰©ç†æ•°æ®è€Œä¸æ˜¯æ–‡ä»¶åœ¨æ–‡ä»¶ç»“æ„ä¸­çš„ä½ç½®ã€‚ç¡¬é“¾æ¥è®°å½•çš„æ˜¯ç›®æ ‡çš„inodeã€‚åŒä¸€æ–‡ä»¶çš„ä¸åŒç¡¬é“¾æ¥æ–‡ä»¶ç›¸å½“äºè¯¥æ–‡ä»¶çš„å¤šä¸ªä¸åŒæ–‡ä»¶åï¼Œå³å¤šä¸ªä¸åŒè®¿é—®è·¯å¾„ï¼Œä»–ä»¬çš„inodeéƒ½æ˜¯ä¸€æ ·çš„ã€‚ä¸å¯ä»¥ä¸ºç›®å½•åˆ›å»ºè½¯è¿æ¥ã€‚
> - `ç¬¦å·é“¾æ¥`ï¼šå’ŒåŸæ–‡ä»¶ä¸æ˜¯åŒä¸€ä¸ªæ–‡ä»¶ï¼Œç¬¦å·é“¾æ¥ä¼šæœ‰è‡ªå·±çš„inodeï¼Œå®ƒæ‰€å¼•ç”¨çš„æ˜¯åŸæ–‡ä»¶çš„pathï¼Œå½“åŸæ–‡ä»¶è¢«ç§»åŠ¨æˆ–åˆ é™¤çš„æ—¶å€™ï¼Œç¬¦å·é“¾æ¥çš„æ–‡ä»¶å°±ä¸å¯ä»¥ã€‚ä¾‹å¦‚windowsä¸­çš„å¿«æ·æ–¹å¼ã€‚ä¹Ÿå¯ä»¥ä¸ºç›®å½•åˆ›å»ºè½¯è¿æ¥ã€‚ å¦‚ä½•å»ºç«‹ç¡¬é“¾æ¥å’Œè½¯è¿æ¥å‘¢ å¯ä»¥ä½¿ç”¨`ln`å‘½ä»¤æ¥åˆ›å»º
> - `ln åŸæ–‡ä»¶å ç¡¬é“¾æ¥æ–‡ä»¶å`, ä¾‹å¦‚ï¼š `ln file hardfile`,å°±æ˜¯åˆ›å»ºäº†`file`æ–‡ä»¶çš„ç¡¬é“¾æ¥æ–‡ä»¶`hardfile`
> - `ln -s åŸæ–‡ä»¶å ç¡¬é“¾æ¥æ–‡ä»¶å`,ä¾‹å¦‚ï¼š `ln -s file softfile`,å°±æ˜¯åˆ›å»ºäº†`file`æ–‡ä»¶çš„ç¡¬é“¾æ¥æ–‡ä»¶`softfile` åœ¨ç³»ç»Ÿä¸­æŸ¥çœ‹æ“ä½œä¸€éï¼ˆæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼‰
>
> ```cmd
> cmdå¤åˆ¶ä»£ç touch file && echo 'thisi is init file' > file
> ln file hardfile
> ln -s file softfile 
> ln -ls
> ```
>
> ![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/15369e26450440d1a00828bf2d2cece3~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?) å¯ä»¥çœ‹åˆ°`hardfile`å’Œ`file`çš„inodeæ˜¯ä¸€æ ·çš„ï¼ˆæœ€å·¦ä¾§çš„33038778ï¼‰ï¼Œè€Œ`softfile`æ˜¯æœ‰äº†ä¸€ä¸ªè‡ªå·±çš„inode
>  æ­¤æ—¶å¦‚æœåˆ é™¤`file`æ–‡ä»¶ `rm file`ï¼Œå†å»æŸ¥çœ‹`hardfile`å’Œ`softfile`çœ‹ä¸€ä¸‹æœ‰ä»€ä¹ˆå˜åŒ–
>
> ```cmd
> cmdå¤åˆ¶ä»£ç cat hardfile
> cat softfile
> ```
>
> æ­¤æ—¶ä¼šå‘ç°ï¼Œ`hardfile`æ–‡ä»¶æ˜¯ä¸å—å½±å“çš„,`softfile`å·²ç»ä¸å­˜åœ¨äº†ï¼Œå› ä¸ºå®ƒé“¾æ¥åˆ°çš„`file`å·²ç»ä¸å­˜åœ¨äº† ![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6208555e5436451cbf2d6eb54020dbd8~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

## å…¶ä»–å¯¹æ¯”

ä»¥ä¸‹æ˜¯å®˜æ–¹ç»™å‡ºçš„`pnpm`ä¸`npm`å’Œ`yarn`çš„å¯¹æ¯”

| æ ‡é¢˜                     | pnpm                                                         | yarn                 | npm                     |
| ------------------------ | ------------------------------------------------------------ | -------------------- | ----------------------- |
| å·¥ä½œç©ºé—´æ”¯æŒï¼ˆmonorepoï¼‰ | âœ”ï¸                                                            | âœ”ï¸                    | âœ”ï¸                       |
| éš”ç¦»çš„ `node_modules`    | âœ”ï¸ - é»˜è®¤                                                     | âœ”ï¸                    | âŒ                       |
| æå‡çš„ `node_modules`    | âœ”ï¸                                                            | âœ”ï¸                    | âœ”ï¸ - é»˜è®¤                |
| è‡ªåŠ¨å®‰è£… peers           | âœ”ï¸ - é€šè¿‡ [auto-install-peers=true](https://link.juejin.cn?target=https%3A%2F%2Fpnpm.io%2Fzh%2Fnpmrc%23auto-install-peers) | âŒ                    | âœ”ï¸                       |
| Plug'n'Play              | âœ”ï¸                                                            | âœ”ï¸ - é»˜è®¤             | âŒ                       |
| é›¶å®‰è£…                   | âŒ                                                            | âœ”ï¸                    | âŒ                       |
| ä¿®è¡¥ä¾èµ–é¡¹               | âŒ                                                            | âœ”ï¸                    | âŒ                       |
| ç®¡ç† Node.js ç‰ˆæœ¬        | âœ”ï¸                                                            | âŒ                    | âŒ                       |
| æœ‰é”æ–‡ä»¶                 | âœ”ï¸ - `pnpm-lock.yaml`                                         | âœ”ï¸ - `yarn.lock`      | âœ”ï¸ - `package-lock.json` |
| æ”¯æŒè¦†ç›–                 | âœ”ï¸                                                            | âœ”ï¸ - é€šè¿‡ resolutions | âœ”ï¸                       |
| å†…å®¹å¯å¯»å€å­˜å‚¨           | âœ”ï¸                                                            | âŒ                    | âŒ                       |
| åŠ¨æ€åŒ…æ‰§è¡Œ               | âœ”ï¸ - é€šè¿‡ `pnpm dlx`                                          | âœ”ï¸ - é€šè¿‡ `yarn dlx`  | âœ”ï¸ - é€šè¿‡ `npx`          |

# å®‰è£…å’Œä½¿ç”¨

## å®‰è£…

### ä½¿ç”¨ç‹¬ç«‹è„šæœ¬

```
curl -fsSL https://get.pnpm.io/install.sh | sh -`
 æˆ–è€…
 `wget -qO- https://get.pnpm.io/install.sh | sh -
```

### ä½¿ç”¨npmå®‰è£…

```
npm install -g pnpm
```

### ä½¿ç”¨homebrewå®‰è£…

```
brew install pnpm
```

## ä½¿ç”¨

ä»¥ä¸‹æ˜¯åˆ—å‡ºå¸¸ç”¨çš„å‘½ä»¤ï¼Œå…·ä½“å¯ä»¥å‚è€ƒå®˜ç½‘[ç®¡ç†ä¾èµ–](https://link.juejin.cn?target=https%3A%2F%2Fpnpm.io%2Fzh%2Fcli%2Fadd)

### å®‰è£…ä¾èµ–åŒ…

```
pnpm add <pkg>
```

| Command              | Meaning                       |
| -------------------- | ----------------------------- |
| `pnpm add sax`       | ä¿å­˜åˆ° `dependencies`         |
| `pnpm add -D sax`    | ä¿å­˜åˆ° `devDependencies`      |
| `pnpm add -O sax`    | ä¿å­˜åˆ° `optionalDependencies` |
| `pnpm add -g sax`    | Install package globally      |
| `pnpm add sax@next`  | ä» `next` æ ‡ç­¾ä¸‹å®‰è£…          |
| `pnpm add sax@3.0.0` | å®‰è£…æŒ‡å®šç‰ˆæœ¬ `3.0.0`          |

### ä¸‹è½½æ‰€æœ‰ä¾èµ–

```
pnpm install` or `pnpm i
```

### æŒ‡å®šçš„èŒƒå›´æ›´æ–°è½¯ä»¶åŒ…çš„æœ€æ–°ç‰ˆæœ¬

```
pnpm update` or `pnpm up
```

| Command              | Meaning                                                |
| -------------------- | ------------------------------------------------------ |
| `pnpm up`            | éµå¾ª `package.json` æŒ‡å®šçš„èŒƒå›´æ›´æ–°æ‰€æœ‰çš„ä¾èµ–é¡¹         |
| `pnpm up --latest`   | æ›´æ–°æ‰€æœ‰ä¾èµ–é¡¹ï¼Œæ­¤æ“ä½œä¼šå¿½ç•¥ `package.json` æŒ‡å®šçš„èŒƒå›´ |
| `pnpm up foo@2`      | å°† `foo` æ›´æ–°åˆ° v2 ä¸Šçš„æœ€æ–°ç‰ˆæœ¬                        |
| `pnpm up "@babel/*"` | æ›´æ–° `@babel` èŒƒå›´å†…çš„æ‰€æœ‰ä¾èµ–é¡¹                       |

### åˆ é™¤ä¾èµ–

```
pnpm remove` or `pnpm rm` or `pnpm uninstall` or `pnpm un
```

### è¿è¡Œè„šæœ¬

- è¿è¡Œä¸€ä¸ªåœ¨ `package`çš„ manifest æ–‡ä»¶ä¸­å®šä¹‰çš„è„šæœ¬:`pnpm run`
- è¿è¡Œåœ¨` package` çš„` scripts` å¯¹è±¡ä¸­`test` å±æ€§æŒ‡å®šçš„ä»»æ„çš„å‘½ä»¤:`pnpm test`
- ä» `create-*` æˆ– `@foo/create-*` å¯åŠ¨å¥—ä»¶åˆ›å»ºé¡¹ç›®:`pnpm create`,ä¾‹å¦‚`pnpm create react-app my-app`
- è¿è¡Œåœ¨` package` çš„` scripts` å¯¹è±¡ä¸­`start` å±æ€§æŒ‡å®šçš„ä»»æ„çš„å‘½ä»¤:`pnpm start` or`run start`

å‚è€ƒæ–‡ç« 
 [å‰–æNpmã€Yarn ä¸ Pnpm ä¾èµ–ç®¡ç†é€»è¾‘](https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.51cto.com%2Farticle%2F692882.html)

[ä»€ä¹ˆæ˜¯PNPMï¼Ÿ](https://link.juejin.cn?target=https%3A%2F%2Fwww.jianshu.com%2Fp%2Fa805e182798f)

[å…³äºç°ä»£åŒ…ç®¡ç†å™¨çš„æ·±åº¦æ€è€ƒâ€”â€”ä¸ºä»€ä¹ˆç°åœ¨æˆ‘æ›´æ¨è pnpm è€Œä¸æ˜¯ npm/yarn?](https://juejin.cn/post/6932046455733485575)

[ä¸ºä»€ä¹ˆæ¨èä½¿ç”¨pnpm](https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F419399115)

[éƒ½2022å¹´äº†ï¼Œpnpmå¿«åˆ°ç¢—é‡Œæ¥ï¼](https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F457698236)



ä½œè€…ï¼šæˆ‘å°±æ˜¯å°å‚²å¨‡
é“¾æ¥ï¼šhttps://juejin.cn/post/7114117329687937032
æ¥æºï¼šç¨€åœŸæ˜é‡‘
è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚